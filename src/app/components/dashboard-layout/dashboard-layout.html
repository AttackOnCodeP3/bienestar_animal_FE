<mat-toolbar>
  <mat-toolbar-row>
    <button mat-icon-button (click)="matSidenav()?.toggle()">
      <mat-icon class="material-symbols-outlined logo-color-theme">menu</mat-icon>
    </button>
    <img class="ms-2 logo" src="logo.png" alt="Logo de la aplicacion"/>
  </mat-toolbar-row>
</mat-toolbar>

<mat-sidenav-container>
  <mat-sidenav [opened]="!isScreenSmall()" [mode]="sideNavMode()" [style.width]="'260px'" class="px-1">
    <mat-nav-list class="mx-1 ms-lg-1 me-lg-0">
      <mat-accordion>
        @for (item of menuItems; track item) {
          @if ((item?.children?.length ?? 0) > 0) {
            <mat-expansion-panel class="mb-2" [disabled]="item.isDisabled">
              <mat-expansion-panel-header class="px-3">
                <mat-panel-title>
                  <mat-icon class="material-symbols-outlined">{{ item.icon }}</mat-icon>
                  <span class="ms-2">{{ item.label }}</span>
                </mat-panel-title>
              </mat-expansion-panel-header>

              <mat-action-list>
                @for (child of item.children; track child) {
                  <mat-list-item
                    class="mb-2"
                    [disabled]="child.isDisabled"
                    [routerLink]="child.route"
                    routerLinkActive="mdc-list-item--activated">
                    <span>{{ child.label }}</span>
                  </mat-list-item>
                }
              </mat-action-list>
            </mat-expansion-panel>
          }
        }
      </mat-accordion>

      @for (item of menuItems; track item) {
        @if (!item.children || item.children.length === 0) {
          <mat-list-item
            class="mb-2"
            [disabled]="item.isDisabled"
            [routerLink]="item.route"
            routerLinkActive="mdc-list-item--activated"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            <mat-icon matListItemIcon class="material-symbols-outlined">{{ item.icon }}</mat-icon>
            <span>{{ item.label }}</span>
          </mat-list-item>
        }
      }

    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <router-outlet/>
  </mat-sidenav-content>
</mat-sidenav-container>
